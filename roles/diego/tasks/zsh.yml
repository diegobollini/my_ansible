---
# Para instalar zsh y omz. La idea es usar stow y dotfiles para el resto de la configuración, theme, plugins, etc.
- name: zsh - Instalar
  apt:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
      - zsh
      - zsh-autosuggestions
      - zsh-syntax-highlighting
      - fonts-porwerline

- name: zsh - Set as default shell
  become: true
  shell: chsh -s $(which zsh) "{{ remote_regular_user }}"

- name: zsh - Copiar archivo de configuración
  copy:
    src: ./files/.zshrc
    dest: ~/.zshrc
    owner: "{{ remote_regular_user }}"
    group: "{{ remote_regular_user }}"
    mode: "744"

# https://github.com/ohmyzsh/ohmyzsh
- name: omz - Descargar script
  get_url:
    url: https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh
    dest: /tmp/omz_install.sh
    mode: '+x'
    force: true

- name: omz - Instalar
  become: true
  script: /tmp/omz_install.sh

# https://github.com/cantino/mcfly
- name: mcfly - Descargar script
  get_url:
    url: https://raw.githubusercontent.com/cantino/mcfly/master/ci/install.sh
    dest: /tmp/mcfly_install.sh
    mode: '+x'
    force: true

- name: mcfly - Instalar
  become: true
  script: /tmp/mcfly_install.sh --git cantino/mcfly